<br>
<br>
<br>


<div class="container mt-5">
    <h3 class="mt-4">Emprestimos</h3>

    <ol class="breadcrumb mb-4">
        <li class="breadcrumb-item active">Informações</li>
    </ol>
    <div class="container">
        <form #loginForm="ngForm">
            <div class="row">
                <div class="col-md-12">
                    <div class="alert alert-success" role="alert" *ngIf="alertSucesso == true">
                        {{ msgSucesso }}
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="alert alert-danger" role="alert" *ngIf="alertFalha == true">
                        {{ msgFalha }}
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-4">
                    <label class="small mb-1">Emprestimo para: </label>
                    <input type="text" class="form-control py-4" name="nome" [(ngModel)]="emprestimo.nome"
                        placeholder="Nome da pessoa" />
                </div>
                <div class="col-md-4">
                    <label class="small mb-1">Descrição:</label>
                    <input type="text" class="form-control py-4" name="descricao" autocomplete="off"
                        placeholder="Descrição do Emprestimo" [(ngModel)]="emprestimo.descricao" />
                </div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <label class="small mb-1">Valor Emprestado:</label>
                    <input type="text" class="form-control py-4" name="valor" autocomplete="off"
                        placeholder="Valor Gastado" (keyup)="onKeyUp($event)"
                        [(ngModel)]="valorEmprestimo" /><!--mask="(00) 0 0000-0000" [(ngModel)]="valorGasto"-->
                </div>
                <div class="col-md-4">
                    <label class="small mb-1">Data e Hora:</label>
                    <input type="datetime-local" class="form-control py-4" name="dataHora"
                        [(ngModel)]="emprestimo.dataCriacao" /><!--[(ngModel)]="user"-->
                </div>
            </div>
            <div class="row">
                <div class="form-group float-right mt-4 mt-0 ml-4">
                    <button class="btn btn-primary" (click)="cadastrar()">Cadastrar</button>
                </div>
                <div class="form-group d-flex justity-content-between mt-4 mt-0 ml-4">
                    <button class="btn btn-secondary" routerLink="/home">Voltar</button>
                </div>
            </div>

            <br>
            <br>
            <br>
            <div class="row">
                <div class="col-md-12">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover">
                            <thead class="thead-dark">
                                <tr>
                                    <th (click)="sort('nome')">Nome<span *ngIf="key =='nome'"> {{ reverse ?
                                            '▲' : '▼' }} </span></th>
                                    <th (click)="sort('descricao')">Descrição<span *ngIf="key =='descricao'"> {{ reverse
                                            ?
                                            '▲' : '▼' }} </span></th>
                                    <th (click)="sort('dataCriacao')">Data<span *ngIf="key =='dataCriacao'">
                                            {{
                                            reverse ? '▲' : '▼' }} </span></th>
                                    <th (click)="sort('valor')">Valor<span
                                            *ngIf="key =='valor'"> {{ reverse ? '▲' : '▼' }} </span></th>
                                    <th>Editar</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let emprest of emprestimos | orderBy: key : reverse; let i = index ">
                                    <td>{{ emprest.nome}}</td>
                                    <td>{{ emprest.descricao}}</td>
                                    <td>{{ emprest.dataCriacao | date : 'dd/MM HH:mm' }}</td>
                                    <td>{{  formataValor(emprest.valor) }} </td>
                                    <td>
                                        <div class="btn-group btn-group-sm" role="group" aria-label="...">
                                            <button class="btn btn-secondary" (click)="preparaDelecao(emprest)"
                                                data-toggle="modal" data-target="#modalDelecao"><i
                                                    class="fa fa-trash"></i></button>
                                        </div>

                                    </td>


                                </tr>

                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="modalDelecao" class="modal fade" role="dialog">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4>Confirmação</h4>
                            </div>
                            <div class="modal-body">
                                <h6>O Emprestimo já foi pago?</h6> <br>
                            </div>
                            <div class="modal-footer">
                                <button class="btn btn-danger" (click)="deletarEmprestimo(emprestimoSelecionado)"
                                    data-dismiss="modal">Confirmar</button>
                                <button class="btn btn-primary ml-1" data-dismiss="modal">Cancelar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <br>
            <br>
            <br>


        </form>

    </div>
</div>